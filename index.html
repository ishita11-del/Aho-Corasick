<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aho–Corasick Algorithm Visualization</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .highlight {
      background-color: #facc15;
      border-radius: 4px;
      padding: 2px 4px;
      color: black;
      font-weight: bold;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
  <header class="text-center py-6 bg-blue-600 text-white shadow">
    <h1 class="text-3xl font-bold">Aho–Corasick Algorithm Visualization</h1>
    <p class="text-sm mt-2">Compare Naive and Aho–Corasick String Matching Approaches</p>
  </header>

  <main class="max-w-4xl mx-auto py-10 px-4">
    <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-2">Enter Input</h2>
      <p class="text-gray-600 mb-2">Enter your text and patterns (comma-separated):</p>
      <textarea id="textInput" class="w-full p-2 border rounded mb-3" rows="3" placeholder="Enter text here..."></textarea>
      <input id="patternsInput" class="w-full p-2 border rounded mb-3" placeholder="Enter patterns (e.g., he,she,his,hers)" />

      <div class="flex gap-4">
        <button id="naiveBtn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded shadow">
          Search Without Aho–Corasick
        </button>
        <button id="ahoBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded shadow">
          Search With Aho–Corasick
        </button>
      </div>
    </section>

    <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-2">Output</h2>
      <div id="outputArea" class="p-4 border rounded bg-white shadow min-h-[100px] text-lg"></div>
      <p id="timeDisplay" class="mt-3 text-gray-700 font-medium"></p>
    </section>

    <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-2">Algorithm Explanation</h2>
      <p class="text-gray-700 mb-2">
        <strong>Aho–Corasick</strong> efficiently finds multiple patterns in a single pass by building a Trie of all patterns and creating
        failure links that allow the algorithm to skip redundant comparisons.
      </p>
      <p class="text-gray-700 mb-2">
        <strong>Time Complexity:</strong> O(n + m + z)
      </p>
      <p class="text-gray-700">
        <strong>Applications:</strong> Spam filters, plagiarism detection, DNA pattern matching, search engines.
      </p>
    </section>

    <footer class="text-center py-4 border-t mt-10 text-gray-600 text-sm">
      © 2025 | Aho–Corasick Visualization | Made by [Your Name]
    </footer>
  </main>

  <script>
    function highlightText(text, matches) {
      let highlighted = '';
      let lastIndex = 0;

      matches.forEach(match => {
        highlighted += text.slice(lastIndex, match.start);
        highlighted += `<span class="highlight">${text.slice(match.start, match.end)}</span>`;
        lastIndex = match.end;
      });

      highlighted += text.slice(lastIndex);
      return highlighted;
    }

    function naiveSearch(text, patterns) {
      const matches = [];
      const startTime = performance.now();

      for (const pattern of patterns) {
        let index = text.indexOf(pattern);
        while (index !== -1) {
          matches.push({ start: index, end: index + pattern.length });
          index = text.indexOf(pattern, index + 1);
        }
      }

      const endTime = performance.now();
      return { matches: matches.sort((a, b) => a.start - b.start), time: endTime - startTime };
    }

    function ahoCorasickSearch(text, patterns) {
      // Basic Aho–Corasick-like simulation (simplified)
      const trie = {};
      for (const pattern of patterns) {
        let node = trie;
        for (const ch of pattern) {
          node[ch] = node[ch] || {};
          node = node[ch];
        }
        node.output = (node.output || []).concat(pattern);
      }

      const matches = [];
      let state = trie;
      const startTime = performance.now();

      for (let i = 0; i < text.length; i++) {
        let ch = text[i];
        while (state && !state[ch]) state = trie; // simulate failure link
        state = state[ch] || trie;
        if (state.output) {
          for (const pattern of state.output) {
            matches.push({ start: i - pattern.length + 1, end: i + 1 });
          }
        }
      }

      const endTime = performance.now();
      return { matches: matches.sort((a, b) => a.start - b.start), time: endTime - startTime };
    }

    document.getElementById('naiveBtn').addEventListener('click', () => {
      const text = document.getElementById('textInput').value;
      const patterns = document.getElementById('patternsInput').value.split(',').map(p => p.trim()).filter(p => p);
      const { matches, time } = naiveSearch(text, patterns);
      document.getElementById('outputArea').innerHTML = highlightText(text, matches);
      document.getElementById('timeDisplay').textContent = `Naive Search Time: ${time.toFixed(3)} ms`;
    });

    document.getElementById('ahoBtn').addEventListener('click', () => {
      const text = document.getElementById('textInput').value;
      const patterns = document.getElementById('patternsInput').value.split(',').map(p => p.trim()).filter(p => p);
      const { matches, time } = ahoCorasickSearch(text, patterns);
      document.getElementById('outputArea').innerHTML = highlightText(text, matches);
      document.getElementById('timeDisplay').textContent = `Aho–Corasick Search Time: ${time.toFixed(3)} ms`;
    });
  </script>
</body>
</html>
